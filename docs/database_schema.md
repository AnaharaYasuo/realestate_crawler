# データベース保存項目 (Database Schema)

本プロジェクトで収集・保存されるデータベースのテーブル定義およびカラム一覧です。

**サイト凡例:**
*   **M**: 三井のリハウス (`mitsui`)
*   **S**: 住友不動産販売 (`sumifu`)
*   **T**: 東急リバブル (`tokyu`)
*   **N**: 野村の仲介＋ (`nomura`)
*   **Mi**: ミサワホーム不動産 (`misawa`)
*   **○**: 取得・保存対象
*   **-**: 対象外（またはサイトが取り扱っていない）

---

# データベース保存項目 (Database Schema)

本プロジェクトで収集・保存されるデータベースの詳細なテーブル定義およびカラム一覧です。
最新のソースコード（Django Models）に基づき、全5サイトおよび全物件種別を網羅しています。

**サイト凡例:**
*   **M**: 三井のリハウス (`mitsui`)
*   **S**: 住友不動産販売 (`sumifu`)
*   **T**: 東急リバブル (`tokyu`)
*   **N**: 野村の仲介＋ (`nomura`)
*   **Mi**: ミサワホーム不動産 (`misawa`)
*   **○**: 取得・保存対象
*   **-**: 対象外（またはサイトが取り扱っていない）

---

## 1. 共通基本情報 (Common Basic Info)
全ての物件種別（マンション、土地、戸建て、投資用）で共通して保持する基本情報です。

| 論理名 | 物理名 | M | S | T | N | Mi | 説明 |
| :--- | :--- | :-: | :-: | :-: | :-: | :-: | :--- |
| 物件名 | `propertyName` | ○ | ○ | ○ | ○ | ○ | サイト上の物件タイトル |
| URL | `pageUrl` | ○ | ○ | ○ | ○ | ○ | 物件詳細ページのURL |
| 登録日 | `inputDate` | ○ | ○ | ○ | ○ | ○ | クローリング実行日 |
| 登録日時 | `inputDateTime`| ○ | ○ | ○ | ○ | ○ | 実行日時 |
| 価格(文字列) | `priceStr` | ○ | ○ | ○ | ○ | ○ | e.g. "5,480万円" |
| 価格(数値) | `price` | ○ | ○ | ○ | ○ | ○ | 円単位 |
| 住所 | `address` | ○ | ○ | ○ | ○ | ○ | |
| 住所分割 | `address1`~`3` | ○ | ○ | ○ | - | - | 都道府県, 市区町村等 |
| 交通(1) | `railway1` | ○ | ○ | ○ | ○ | ○ | 沿線名 |
| 交通(1) | `station1` | ○ | ○ | ○ | ○ | ○ | 駅名 |
| 交通(1) | `railwayWalkMinute1` | ○ | ○ | ○ | ○ | ○ | 徒歩分数 (数値) |
| 交通案内 | `transfer1`~`5` | ○ | ○ | ○ | - | - | 乗り換え情報等テキスト |
| 路線数 | `railwayCount` | ○ | ○ | ○ | - | - | 取得できた路線合計 |

---

## 2. 物件種別ごとの詳細スペック (Specs by Type)

### マンション (Mansion)
| 論理名 | 物理名 | M | S | T | N | Mi | 説明 |
| :--- | :--- | :-: | :-: | :-: | :-: | :-: | :--- |
| 専有面積 | `senyuMenseki` | ○ | ○ | ○ | ○ | ○ | m2 |
| 間取り | `madori` | ○ | ○ | ○ | ○ | ○ | 3LDK 等 |
| バルコニー面積 | `barukoniMenseki`| ○ | ○ | ○ | ○ | ○ | |
| 築年月 | `chikunengetsu`| ○ | ○ | ○ | ○ | ○ | |
| 所在階 | `floorType_kai`| ○ | ○ | ○ | ○ | ○ | `floor` (Mi), `floorNumber` (N) |
| 建物の階建 | `kaisu` | ○ | ○ | ○ | ○ | ○ | 地上〇階建 |
| 構造 | `kouzou` | ○ | ○ | ○ | ○ | ○ | RC, SRC 等 |
| 総戸数 | `soukosu` | ○ | ○ | ○ | ○ | ○ | |
| 管理費 | `kanrihi` | ○ | ○ | ○ | ○ | ○ | |
| 修繕積立金 | `syuzenTsumitate`| ○ | ○ | ○ | ○ | ○ | |
| 管理形態 | `kanriKeitai` | ○ | ○ | ○ | ○ | ○ | 全部委託 等 |
| 管理会社 | `kanriKaisya` | ○ | ○ | ○ | ○ | ○ | |
| 分譲会社 | `bunjoKaisya` | ○ | ○ | ○ | - | - | |
| 施工会社 | `sekouKaisya` | ○ | ○ | ○ | - | - | |
| 向き | `saikou` | ○ | ○ | ○ | ○ | - | 南向き 等 |
| 角部屋 | `kadobeya` | ○ | ○ | ○ | - | - | |
| 駐車場 | `tyusyajo` | ○ | ○ | ○ | ○ | ○ | |

### 戸建て (Kodate) / 土地 (Tochi)
| 論理名 | 物理名 | M | S | T | N | Mi | 説明 |
| :--- | :--- | :-: | :-: | :-: | :-: | :-: | :--- |
| 土地面積 | `tochiMenseki` | ○ | ○ | ○ | ○ | ○ | |
| 建物面積 | `tatemonoMenseki`| ○ | ○ | ○ | ○ | ○ | 戸建てのみ |
| 間取り | `madori` | ○ | ○ | ○ | ○ | ○ | 戸建てのみ |
| 接道状況 | `setsudou` | ○ | ○ | ○ | ○ | ○ | `roadCondition` (Mi, N) |
| 私道負担 | `setsumen` | ○ | ○ | ○ | ○ | ○ | |
| 地目 | `chimoku` | ○ | ○ | ○ | ○ | ○ | 宅地 等 |
| 土地権利 | `tochikenri` | ○ | ○ | ○ | ○ | ○ | 所有権 等 |
| 建ぺい率 | `kenpei` | ○ | ○ | ○ | ○ | ○ | % |
| 容積率 | `youseki` | ○ | ○ | ○ | ○ | ○ | % |
| 用途地域 | `youtoChiiki` | ○ | ○ | ○ | ○ | ○ | `zoning` (Mi, N) |
| 都市計画 | `kuiki` | ○ | ○ | ○ | ○ | ○ | `urbanPlanning` (Mi, N) |

### 投資用物件 (Investment)
| 論理名 | 物理名 | M | S | T | N | Mi | 説明 |
| :--- | :--- | :-: | :-: | :-: | :-: | :-: | :--- |
| 表面利回り | `grossYield` | ○ | ○ | ○ | ○ | ○ | % (数値) |
| 年間予定収入 | `annualIncome` | - | ○ | ○ | - | ○ | `annualRent` (S, T) |
| 月額予定賃料 | `monthlyRent` | - | ○ | - | - | - | 住友のみ |
| 現在の状況 | `currentStatus` | ○ | ○ | ○ | ○ | - | 満室, 賃貸中 等 |
| 物件種別 | `propertyType` | - | ○ | ○ | - | - | 一棟マンション, 区分 等 |
| 土地面積 | `landArea` | ○ | ○ | ○ | ○ | ○ | `tochiMenseki` (Mi) |
| 建物/専有面積 | `buildingArea` | ○ | ○ | ○ | ○ | ○ | `tatemonoMenseki` (Mi) |
| 構造 | `structure` | ○ | ○ | ○ | ○ | ○ | |
| 築年月 | `yearBuilt` | ○ | ○ | ○ | ○ | ○ | `completionDate` (Mi) |

---

## 3. その他の法的制限・特記事項
*   **国土法届出**: 三井・住友・東急で土地・戸建取得時に対応。
*   **防犯・耐震**: 三井の `kyutaishin` (旧耐震判定) 等、特定サイトのみで計算・保持されるフィールドがあります。
*   **バス利用**: `busUse1` (0/1判定) 等、三井・住友・東急で共通管理。

> [!NOTE]
> 物理名がサイト間で異なる場合（例: `zoning` vs `youtoChiiki`）、データベース上では各サイト（モデル）固有の物理名で保持されますが、クローラーの抽象レイヤーではこれらを同一視して解析・保存を行っています。

> [!TIP]
> 各パーサーはサイト固有のHTML構造（Table, Definition List等）を吸収し、上記 Django モデルのフィールドへマッピングします。マッピングに失敗した場合は `ReadPropertyNameException` などのカスタム例外がスローされ、ログに記録されます。
