# サイト構造: ミサワホーム不動産 (投資用)

## 概要
- **ベースURL**: `https://realestate.misawa.co.jp/search/sale/`
- **種別**: 投資用・居住用 混合 (Investment & Residential Mixed)
- **一覧ページ**: 居住用と同じ。投資用物件は `bukken_type[]=9` パラメータやタグで識別可能。

## 構造分析

### 一覧ページ (List Page)
- **物件項目セレクタ**: 居住用アイテムと同じ。
- **種別の判別**:
  - **タグ**: タイトルに `【アパート 】`, `【一棟売マンション 】` などが含まれる。
  - **カテゴリ**: 検索サイドバーの "投資物件・その他" チェックボックス。
### 抽出ルール
- **厳格な抽出**: 必須項目（物件名、価格、所在地、間取り、面積）が取得できない場合は、空欄をセットする代わりに例外を発生させ、エラーページとして保存する。
- **フォールバックの排除**: 以前使用されていた "-" などの安易なデフォルト値セットを廃止し、データの正確性を優先する。

### 詳細ページ (Detail Page)
居住用ページと非常に類似しています。同じ「物件概要」テーブル構造を使用しています。

#### セレクタ (Selectors)
| 項目 | 取得戦略 (Selector Strategy) | 備考 |
|---|---|---|
| **価格 (Price)** | `th:contains("価格") + td` | 共通 |
| **利回り (Yield)** | `th:contains("利回り") + td` | 投資用のみ |
| **年間収入 (Annual Income)** | `th:contains("年間収入") + td` | 投資用のみ |
| **所在地 (Address)** | `th:contains("所在地") + td` | 共通 |
| **交通 (Traffic)** | `th:contains("交通") + td` | 共通。生テキスト (例: "〇〇線 〇〇駅 徒歩X分")。 |
| **土地/建物面積** | `th:contains("土地面積") + td`, `th:contains("建物面積") + td` | 共通 |

## 居住用モデルとの互換性
- **スキーマ**: 非常に互換性が高いです。`MisawaModel` (または `MisawaCommon`) を基底として使用可能です。
- **パーサー**: 投資用固有のフィールド (利回り、収入) の取得ロジックを追加するだけで、ほぼ同じパーサーロジックを共有できます。
- **交通情報のパース**: 居住用・投資用ともにテーブル内の非構造化文字列です。既存の居住用パーサーが文字列パース（またはRaw保存）を行っている場合、投資用でもそれを再利用できます。
