# Realestate Crawler

[![DeepWiki](https://deepwiki.com/badge-maker?url=https%3A%2F%2Fdeepwiki.com%2FAnaharaYasuo%2Frealestate_crawler)](https://deepwiki.com/AnaharaYasuo/realestate_crawler)

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€5ç¤¾ã®ä¸»è¦ãªä¸å‹•ç”£ã‚µã‚¤ãƒˆã‹ã‚‰ä¸å‹•ç”£ç‰©ä»¶æƒ…å ±ã‚’è‡ªå‹•çš„ã«åé›†ï¼ˆã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼‰ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## æ¦‚è¦

### ã‚·ã‚¹ãƒ†ãƒ ã®ç›®çš„

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®2ã¤ã®ä¸»è¦ç›®çš„ã‚’æŒã¡ã¾ã™ï¼š

1. **ãƒ‡ãƒ¼ã‚¿åé›†**: 5ç¤¾ã®ä¸å‹•ç”£ã‚µã‚¤ãƒˆã‹ã‚‰éåŒæœŸHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨HTMLè§£æã«ã‚ˆã‚Šç‰©ä»¶æƒ…å ±ã‚’è‡ªå‹•å–å¾—
2. **ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–**: æ­£è¦åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆ16-17ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰ã«å¤‰æ›ãƒ»ä¿å­˜

### å¯¾å¿œã‚µã‚¤ãƒˆã¨ç‰©ä»¶ç¨®åˆ¥

| ä¼šç¤¾ | å±…ä½ç”¨ç‰©ä»¶ | æŠ•è³‡ç”¨ç‰©ä»¶ï¼ˆåé›†å¯¾è±¡ï¼‰ | å‚™è€ƒ |
|------|-----------|---------------------|------|
| ä¸‰äº•ã®ãƒªãƒã‚¦ã‚¹ | ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»æˆ¸å»ºã¦ãƒ»åœŸåœ° | ä¸€æ£Ÿãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»ä¸€æ£Ÿã‚¢ãƒ‘ãƒ¼ãƒˆãƒ»æˆ¸å»ºã¦ | åŒºåˆ†ãƒãƒ³ã‚·ãƒ§ãƒ³ã€ãƒ“ãƒ«ã€åº—èˆ—ç­‰ã¯å¯¾è±¡å¤– |
| ä½å‹ä¸å‹•ç”£è²©å£² | ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»æˆ¸å»ºã¦ãƒ»åœŸåœ° | ä¸€æ£Ÿãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»ä¸€æ£Ÿã‚¢ãƒ‘ãƒ¼ãƒˆãƒ»æŠ•è³‡ç”¨æˆ¸å»º | 12ç¨®é¡ä¸­3ç¨®é¡ã‚’åé›† |
| æ±æ€¥ãƒªãƒãƒ–ãƒ« | ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»æˆ¸å»ºã¦ãƒ»åœŸåœ° | ãƒãƒ³ã‚·ãƒ§ãƒ³ä¸€æ£Ÿãƒ»ã‚¢ãƒ‘ãƒ¼ãƒˆ | æˆ¸å»ºã¦ã¯å¯¾è±¡å¤–ï¼ˆã‚µã‚¤ãƒˆã«ç‰©ä»¶ç¨®åˆ¥ãªã—ï¼‰ |
| é‡æ‘ã®ä»²ä»‹+ | ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»æˆ¸å»ºã¦ãƒ»åœŸåœ° | ä¸€æ£Ÿãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»ä¸€æ£Ÿã‚¢ãƒ‘ãƒ¼ãƒˆãƒ»æŠ•è³‡ç”¨æˆ¸å»º | 11ç¨®é¡ä¸­3ç¨®é¡ã‚’åé›† |
| ãƒŸã‚µãƒ¯ãƒ›ãƒ¼ãƒ ä¸å‹•ç”£ | ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»æˆ¸å»ºã¦ãƒ»åœŸåœ° | ä¸€æ£Ÿãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ»ä¸€æ£Ÿã‚¢ãƒ‘ãƒ¼ãƒˆ | æˆ¸å»ºã¦ã¯å¯¾è±¡å¤–ï¼ˆã‚µã‚¤ãƒˆã«ç‰©ä»¶ç¨®åˆ¥ãªã—ï¼‰ |

**åé›†å¯¾è±¡**: 5ç¤¾ Ã— 4ã‚«ãƒ†ã‚´ãƒªï¼ˆå±…ä½ç”¨3ç¨®åˆ¥ + æŠ•è³‡ç”¨ï¼‰

> [!NOTE]
> **æŠ•è³‡ç”¨ç‰©ä»¶ã®åé›†å¯¾è±¡**
> - ä¸€æ£Ÿãƒãƒ³ã‚·ãƒ§ãƒ³ï¼ˆRCé€ ãƒ»é‰„éª¨é€ ãªã©ã®é›†åˆä½å®…ä¸€æ£Ÿï¼‰
> - ä¸€æ£Ÿã‚¢ãƒ‘ãƒ¼ãƒˆï¼ˆæœ¨é€ ãƒ»è»½é‡é‰„éª¨é€ ãªã©ã®é›†åˆä½å®…ä¸€æ£Ÿï¼‰
> - æˆ¸å»ºã¦ï¼ˆæŠ•è³‡ç”¨ä¸€æˆ¸å»ºã¦ï¼‰â€»ã‚µã‚¤ãƒˆã«ã‚ˆã‚Šå¯¾å¿œçŠ¶æ³ãŒç•°ãªã‚‹
> 
> åŒºåˆ†ãƒãƒ³ã‚·ãƒ§ãƒ³ã€ãƒ“ãƒ«ã€åº—èˆ—/äº‹å‹™æ‰€ã€å·¥å ´/å€‰åº«ã€ãƒ›ãƒ†ãƒ«/æ—…é¤¨ãªã©ã¯åé›†å¯¾è±¡å¤–ã§ã™ã€‚
> å„ã‚µã‚¤ãƒˆã®å…¨ç‰©ä»¶ç¨®åˆ¥ã«ã¤ã„ã¦ã¯ã€[åç›Šä¸å‹•ç”£ã‚µã‚¤ãƒˆç‰©ä»¶ç¨®åˆ¥ä¸€è¦§](docs/requirements/investment_property_types.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ã‚·ã‚¹ãƒ†ãƒ ã®ç‰¹å¾´

ãƒ­ãƒ¼ã‚«ãƒ«APIã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰ã—ã€HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚‹ã“ã¨ã§å„ã‚µã‚¤ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ãƒ»è§£æå‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚åé›†ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯MySQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ä¿å­˜ã•ã‚Œã¾ã™ã€‚
æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ [Task](https://taskfile.dev/) ã¨ [Docker Compose](https://docs.docker.com/compose/) ã‚’ä½¿ç”¨ã—ã¦ç’°å¢ƒæ§‹ç¯‰ãŠã‚ˆã³å®Ÿè¡Œã‚’è¡Œã„ã¾ã™ã€‚

## å‰ææ¡ä»¶

*   [Docker Desktop](https://www.docker.com/products/docker-desktop) ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€èµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨
*   [Task](https://taskfile.dev/installation/) ã‚³ãƒãƒ³ãƒ‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— & èµ·å‹•

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼æ¦‚è¦

`task init` ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã®3ã‚¹ãƒ†ãƒƒãƒ—ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ï¼š

1. **Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰**
   - `python:3.10-slim` ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ä½¿ç”¨
   - MySQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   - Pythonä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆaiohttp, BeautifulSoup4, Djangoç­‰ï¼‰

2. **ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•**
   - `app` ã‚³ãƒ³ãƒ†ãƒŠ: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ8000ï¼‰
   - `mysql` ã‚³ãƒ³ãƒ†ãƒŠ: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ3306ï¼‰

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–**
   - `src/crawler/db_setup.py` ã‚’å®Ÿè¡Œ
   - Djangoãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Š16-17ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

åˆå›å®Ÿè¡Œæ™‚ã‚„ã€ç’°å¢ƒã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§é–‹å§‹ã—ãŸã„å ´åˆã¯ `init` ã‚¿ã‚¹ã‚¯ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
task init
```

### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›

```bash
[+] Building 23.5s (10/10) FINISHED
[+] Running 2/2
 âœ” Container realestate_crawler-mysql-1  Started
 âœ” Container realestate_crawler-app-1    Started
Operations to perform:
  Apply all migrations: package
Running migrations:
  Applying package.0001_initial... OK
```

### æ¤œè¨¼æ–¹æ³•

ã‚³ãƒ³ãƒ†ãƒŠãŒæ­£å¸¸ã«èµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèªï¼š

```bash
docker compose ps
```

ä¸¡æ–¹ã®ã‚³ãƒ³ãƒ†ãƒŠãŒ `Up` çŠ¶æ…‹ã§ã‚ã‚Œã°ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æˆåŠŸã§ã™ã€‚

## ä½¿ç”¨æ–¹æ³•

### 1. ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹• (é€šå¸¸æ™‚)

ã™ã§ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ã¦ãŠã‚Šã€ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã—ãŸã„å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
task default
```
ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã€`http://localhost:8000` ã§å¾…æ©ŸçŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚

### 2. ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã®å®Ÿè¡Œ

`task crawl` ã‚³ãƒãƒ³ãƒ‰ã§ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’èµ·å‹•ã—ã¾ã™ã€‚`COMPANY` (å¯¾è±¡ã‚µã‚¤ãƒˆ) ã¨ `TYPE` (ç‰©ä»¶ç¨®åˆ¥) ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚

**å®Ÿè¡Œä¾‹:**

```bash
# ä¸‰äº•ã®ãƒªãƒã‚¦ã‚¹ / ãƒãƒ³ã‚·ãƒ§ãƒ³
task crawl COMPANY=mitsui TYPE=mansion
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**

*   **COMPANY**:
    *   `mitsui`: ä¸‰äº•ã®ãƒªãƒã‚¦ã‚¹
    *   `sumifu`: ä½å‹ä¸å‹•ç”£è²©å£²
    *   `tokyu`: æ±æ€¥ãƒªãƒãƒ–ãƒ«
    *   `nomura`: ãƒãƒ ã‚³ãƒ ãƒ»ãƒ—ãƒ­ (æŠ•è³‡ç”¨)
*   **TYPE**:
    *   `mansion`: ä¸­å¤ãƒãƒ³ã‚·ãƒ§ãƒ³
    *   `tochi`: åœŸåœ°
    *   `kodate`: æˆ¸å»ºã¦

**å¯¾å¿œè¡¨:**

| COMPANY | TYPE |
| :--- | :--- |
| `mitsui` | `mansion`, `tochi`, `kodate`, `investment` |
| `sumifu` | `mansion`, `tochi`, `kodate`, `investment` |
| `tokyu` | `mansion`, `tochi`, `kodate`, `investment` |
| `nomura` | `mansion`, `tochi`, `kodate`, `investment` |
| `misawa` | `mansion`, `tochi`, `kodate`, `investment` |

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### Fire-and-Forget ãƒ‘ã‚¿ãƒ¼ãƒ³

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ŒFire-and-Forgetã€æ–¹å¼ã®éåŒæœŸAPIå‘¼ã³å‡ºã—ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

**ç‰¹å¾´:**
- **å†å¸°çš„å‘¼ã³å‡ºã—**: Start â†’ Region â†’ List â†’ Detail ã®å„ã‚¹ãƒ†ãƒƒãƒ—ãŒæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã§èµ·å‹•
- **å³æ™‚ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: å„APIã¯å‡¦ç†å®Œäº†ã‚’å¾…ãŸãšã€å³åº§ã«HTTP 200ã‚’è¿”å´
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨±å®¹**: 3ç§’ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã€‚æ¥ç¶šç¢ºç«‹æ™‚ç‚¹ã§æˆåŠŸã¨ã¿ãªã™
- **ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å¯¾å¿œ**: Google Cloud Functionsç­‰ã§ã®åˆ†æ•£å®Ÿè¡ŒãŒå¯èƒ½

**å‡¦ç†ãƒ•ãƒ­ãƒ¼:**
```
User â†’ task crawl
  â†“
Start API (HTTP 200å³æ™‚è¿”å´)
  â†“ (éåŒæœŸPOST)
Region API (HTTP 200å³æ™‚è¿”å´)
  â†“ (éåŒæœŸPOST Ã— Nåœ°åŸŸ)
List API (HTTP 200å³æ™‚è¿”å´)
  â†“ (éåŒæœŸPOST Ã— Mç‰©ä»¶)
Detail API â†’ DBä¿å­˜
```

### ä¸¦åˆ—å‡¦ç†è¨­å®š

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å€¤ | èª¬æ˜ |
|-----------|-----|------|
| `FIRE_AND_FORGET_TIMEOUT` | 3.0ç§’ | æ¬¡ã‚¹ãƒ†ãƒƒãƒ—èµ·å‹•æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ |
| `DEFAULT_PARARELL_LIMIT` | 2 | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¸¦åˆ—æ•° |
| `DETAIL_PARARELL_LIMIT` | 6 | è©³ç´°ãƒšãƒ¼ã‚¸å–å¾—æ™‚ã®ä¸¦åˆ—æ•° |
| `TCP_CONNECTOR_LIMIT` | 100 | TCPæ¥ç¶šãƒ—ãƒ¼ãƒ«ä¸Šé™ |

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ (Tech Stack)

### ã‚³ã‚¢è¨€èª
- **Python 3.10** (`python:3.10-slim` Dockerã‚¤ãƒ¡ãƒ¼ã‚¸)

### HTTP & ãƒ‘ãƒ¼ã‚¹
- **aiohttp**: éåŒæœŸHTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆJavaScriptãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸è¦ï¼‰
  - å½¹å‰²: ä¸å‹•ç”£ã‚µã‚¤ãƒˆã‹ã‚‰HTMLã‚’å–å¾—
  - ãƒ•ã‚¡ã‚¤ãƒ«: `src/crawler/package/api/api.py`
- **BeautifulSoup4 (bs4)**: HTMLè§£æãƒ»ãƒ‡ãƒ¼ã‚¿æŠ½å‡º
  - å½¹å‰²: HTMLã‹ã‚‰ç‰©ä»¶æƒ…å ±ã‚’æŠ½å‡º
  - ãƒ•ã‚¡ã‚¤ãƒ«: `src/crawler/package/parser/*Parser.py`
- **lxml**: BeautifulSoup4ã®ãƒ‘ãƒ¼ã‚µãƒ¼ã‚¨ãƒ³ã‚¸ãƒ³

### ãƒ‡ãƒ¼ã‚¿å±¤
- **Django**: ORMï¼ˆãƒ¢ãƒ‡ãƒ«å®šç¾©ãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
  - å½¹å‰²: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒç®¡ç†
  - ãƒ•ã‚¡ã‚¤ãƒ«: `src/crawler/package/models/`
- **mysqlclient**: MySQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼
- **MySQL 8.0**: ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆDockerã‚³ãƒ³ãƒ†ãƒŠï¼‰

### ã‚¤ãƒ³ãƒ•ãƒ©
- **Docker / Docker Compose**: ã‚³ãƒ³ãƒ†ãƒŠåŒ–ãƒ»ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  - è¨­å®š: `docker-compose.yml`, `Dockerfile`
- **Task (Taskfile)**: CLIã‚¿ã‚¹ã‚¯è‡ªå‹•åŒ–
  - è¨­å®š: `Taskfile.yml`

### ãƒ†ã‚¹ãƒˆ
- **pytest**: ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
  - ãƒ†ã‚¹ãƒˆ: `src/crawler/tests/`

> [!NOTE]
> ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ä½¿ç”¨ã—ã¦ã„ãŸ Playwright (JavaScriptãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°) ã¯ã€è»½é‡åŒ–ã¨å®‰å®šæ€§å‘ä¸Šã®ãŸã‚å‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚
> ç¾åœ¨ã¯ `aiohttp` + `BeautifulSoup4` ã«ã‚ˆã‚‹é«˜é€Ÿãªé™çš„HTMLè§£æã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### 3. ãƒ­ã‚°ã®ç¢ºèª

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèªã™ã‚‹ã«ã¯ï¼š

```bash
task logs
```

### 4. ã‚µãƒ¼ãƒãƒ¼ã®åœæ­¢

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ã™ã‚‹ã«ã¯ï¼š

```bash
task stop
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•å¤±æ•—

**ç—‡çŠ¶**: `task init` å®Ÿè¡Œå¾Œã«ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ãªã„

**åŸå› ã¨å¯¾å‡¦:**
1. **ãƒãƒ¼ãƒˆç«¶åˆ**: 8000ç•ªã¾ãŸã¯3306ç•ªãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹
   ```bash
   # ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ç¢ºèªï¼ˆWindowsï¼‰
   netstat -an | findstr "8000"
   netstat -an | findstr "3306"
   ```
   å¯¾å‡¦: ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã™ã‚‹ã‹ã€`docker-compose.yml` ã§ãƒãƒ¼ãƒˆç•ªå·ã‚’å¤‰æ›´

2. **Docker Desktopæœªèµ·å‹•**: Docker DesktopãŒèµ·å‹•ã—ã¦ã„ãªã„
   
   å¯¾å‡¦: Docker Desktopã‚’èµ·å‹•ã—ã¦ã‹ã‚‰å†å®Ÿè¡Œ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: `OperationalError: (2003, "Can't connect to MySQL server")`

**åŸå› ã¨å¯¾å‡¦:**
1. **MySQLã‚³ãƒ³ãƒ†ãƒŠæœªèµ·å‹•**: ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ãªã„
   ```bash
   docker compose ps
   # mysql ã‚³ãƒ³ãƒ†ãƒŠãŒ Up ã§ãªã„å ´åˆ
   task default
   ```

2. **æ¥ç¶šæ•°ä¸Šé™**: åŒæ™‚æ¥ç¶šæ•°ãŒä¸Šé™ã«é”ã—ã¦ã„ã‚‹
   
   å¯¾å‡¦: `task stop` â†’ `task default` ã§å†èµ·å‹•

### ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼å®Ÿè¡Œå¾Œã«ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã‚‰ãªã„

**ç—‡çŠ¶**: `task crawl` å®Ÿè¡Œå¾Œã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒè¿½åŠ ã•ã‚Œãªã„

**ç¢ºèªæ‰‹é †:**
1. **ãƒ­ã‚°ç¢ºèª**:
   ```bash
   task logs
   ```
   ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

2. **ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼**: `ReadPropertyNameException` ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆ
   - ã‚µã‚¤ãƒˆã®HTMLæ§‹é€ ãŒå¤‰æ›´ã•ã‚ŒãŸå¯èƒ½æ€§
   - è©²å½“ãƒ‘ãƒ¼ã‚µãƒ¼ã®ä¿®æ­£ãŒå¿…è¦

3. **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼**: `ClientConnectorError` ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆ
   - ä¸€æ™‚çš„ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯éšœå®³
   - è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼ˆ10ç§’å¾Œï¼‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹

### ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ†ã‚¹ãƒˆå¤±æ•—

**ç—‡çŠ¶**: `task test` ã§ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹

**å¯¾å‡¦:**
```bash
# ç‰¹å®šã®ãƒ‘ãƒ¼ã‚µãƒ¼ã®ã¿ãƒ†ã‚¹ãƒˆ
docker compose exec -T app pytest src/crawler/tests/unit/test_mitsui_parser.py -v

# è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›
docker compose exec -T app pytest src/crawler/tests/unit/ -v -s
```

---

## ä»•æ§˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (Specifications)

è©³ç´°ãªä»•æ§˜ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

*   **[å¤–éƒ¨è¨­è¨ˆæ›¸ (Basic Design)](docs/basic_design/basic_design_master.md)**
    *   ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ä»•æ§˜ (Fire-and-Forget, ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°)
    *   URLæ§‹é€ ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å®šç¾©
*   **[å†…éƒ¨è¨­è¨ˆæ›¸ (Detailed Design)](docs/detailed_design/detailed_design_master.md)**
    *   ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒå®šç¾© (å…¨17ãƒ¢ãƒ‡ãƒ«)
    *   APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ§‹é€ 
    *   ã‚¯ãƒ©ã‚¹å›³ãƒ»ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³

---

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ (Documentation)

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å·¥ç¨‹åˆ¥ã«æ•´ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ğŸ“‹ 1. è¦ä»¶å®šç¾© (Requirements)
`docs/requirements/`
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚ä»•æ§˜ã‚„äº‹å‰èª¿æŸ»çµæœã€‚
*   **[requirements_master.md](docs/requirements/requirements_master.md)**
    *   åŸºæœ¬è¦ä»¶å®šç¾©æ›¸
    *   æŠ•è³‡ç”¨ç‰©ä»¶ç¨®åˆ¥å®šç¾©ä¸€è¦§
    *   äºˆå‚™èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ (ä½å‹ä¸å‹•ç”£ã»ã‹)
    *   ã‚µã‚¤ãƒˆæ§‹é€ è§£æè³‡æ–™ (`site_structures/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®å‚ç…§)

    **è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
    *   **[investment_property_types.md](docs/requirements/investment_property_types.md)**: æŠ•è³‡ç”¨ç‰©ä»¶ç¨®åˆ¥å®šç¾©ä¸€è¦§
    *   **[sumifu_crawling_report.md](docs/requirements/sumifu_crawling_report.md)**: ä½å‹ä¸å‹•ç”£äºˆå‚™èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ
    *   **[site_structures/](docs/requirements/site_structures/)**: å„ç¤¾ã‚µã‚¤ãƒˆæ§‹é€ è§£æè³‡æ–™


### ğŸ“ 2. å¤–éƒ¨è¨­è¨ˆ (Basic Design)
`docs/basic_design/`
å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã®ä»•æ§˜ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã€‚
*   **[basic_design_master.md](docs/basic_design/basic_design_master.md)**
    *   ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ä»•æ§˜è©³ç´°
    *   ã‚µãƒ³ãƒ—ãƒ«ç‰©ä»¶URLãƒªã‚¹ãƒˆ

### ğŸ”§ 3. å†…éƒ¨è¨­è¨ˆ (Internal Design)
`docs/internal_design/`
ã‚·ã‚¹ãƒ†ãƒ å†…éƒ¨ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚„ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€‚

**æŠ€è¡“ä»•æ§˜æ›¸:**
- **[ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ](docs/internal_design/database_schema.md)** - å…¨ãƒ¢ãƒ‡ãƒ«ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©ã¨ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **[è©³ç´°è¨­è¨ˆãƒã‚¹ã‚¿ãƒ¼](docs/internal_design/detailed_design_master.md)** - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è©³ç´°è¨­è¨ˆæ¦‚è¦
- **[APIæ§‹é€ è¨­è¨ˆ](docs/internal_design/api_structure.md)** - å†å¸°çš„APIé€£é–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨æŠ•è³‡ç”¨ç‰©ä»¶å–å¾—æˆ¦ç•¥ã®è©³ç´°
- **[ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åçµ±ä¸€è¦ç´„](docs/internal_design/field_naming_standards.md)** - å…¨å…±é€šãƒ¢ãƒ‡ãƒ«ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åçµ±ä¸€è¦ç´„
- **[æŠ•è³‡ç”¨ç‰©ä»¶ã®ç¨®åˆ¥å®šç¾©](docs/domain/property_types.md)** - ä¸å‹•ç”£æŠ•è³‡ã«ãŠã‘ã‚‹æˆ¸å»ºãƒ»ã‚¢ãƒ‘ãƒ¼ãƒˆã®å®šç¾©ã¨åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
- **[ãƒ‘ãƒ¼ã‚µãƒ¼è¨­è¨ˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](docs/parser_design_guidelines.md)** - ä¸€é …ç›®ä¸€é–¢æ•°ï¼ˆOne-Item-One-Methodï¼‰ã®è¨­è¨ˆæ€æƒ³ã¨å®Ÿè£…è¦ç´„


### ğŸ› ï¸ 4. å®Ÿè£…ãƒ»é–‹ç™º (Implementation)
`docs/implementation/`
é–‹ç™ºè€…å‘ã‘ã®ç’°å¢ƒæ§‹ç¯‰ãƒ»å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã€‚
*   **[developer_guide_master.md](docs/implementation/developer_guide_master.md)**
    *   é–‹ç™ºè€…å‘ã‘ã‚¬ã‚¤ãƒ‰ (ç’°å¢ƒæ§‹ç¯‰ã€ãƒ‡ãƒãƒƒã‚°)
    *   ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ
    *   Taskã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
    *   ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ææ¡ˆ

    **è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
    *   **[quick_start.md](docs/implementation/quick_start.md)**: ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰
    *   **[task_commands.md](docs/implementation/task_commands.md)**: Taskã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
    *   **[parser_implementation_procedure.md](docs/implementation/parser_implementation_procedure.md)**: ãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…æ‰‹é †ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³


### ğŸ”§ 5. é‹ç”¨ãƒ»ä¿å®ˆ (Operation)
`docs/operation/`
é‹ç”¨æ‰‹é †ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†ãƒ«ãƒ¼ãƒ«ã€‚
*   **[operation_manual_master.md](docs/operation/operation_manual_master.md)**
    *   é‹ç”¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    *   ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

    **è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
    *   **[troubleshooting.md](docs/operation/troubleshooting.md)**: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    *   **[documentation_guidelines.md](docs/operation/documentation_guidelines.md)**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³


---

## Task ã‚³ãƒãƒ³ãƒ‰å®Œå…¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
(è©³ç´°ã¯ [developer_guide_master.md](docs/implementation/developer_guide_master.md) ã‚’å‚ç…§)

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | å†…éƒ¨å‹•ä½œ | ä½¿ç”¨ä¾‹ |
|---------|------|---------|--------|
| `task init` | åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— | `docker compose up -d --build` + DBåˆæœŸåŒ– | åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ |
| `task default` | ã‚µãƒ¼ãƒãƒ¼èµ·å‹• | `docker compose up -d` | é€šå¸¸ã®èµ·å‹• |
| `task stop` | ã‚µãƒ¼ãƒãƒ¼åœæ­¢ | `docker compose down` | ä½œæ¥­çµ‚äº†æ™‚ |
| `task crawl` | ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼å®Ÿè¡Œ | `curl POST http://localhost:8000/...` | `task crawl COMPANY=mitsui TYPE=mansion` |
| `task logs` | ãƒ­ã‚°è¡¨ç¤º | `docker compose logs -f app` | ãƒ‡ãƒãƒƒã‚°æ™‚ |
| `task test` | ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ | `docker compose exec -T app pytest` | ã‚³ãƒ¼ãƒ‰å¤‰æ›´å¾Œ |

### è©³ç´°ãªä½¿ç”¨ä¾‹

**åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—:**
```bash
task init
# å‡ºåŠ›: Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ â†’ ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹• â†’ DBåˆæœŸåŒ–
```

**ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼å®Ÿè¡Œï¼ˆè¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰:**
```bash
# ä¸‰äº•ã®ãƒªãƒã‚¦ã‚¹ - ãƒãƒ³ã‚·ãƒ§ãƒ³
task crawl COMPANY=mitsui TYPE=mansion

# ä½å‹ä¸å‹•ç”£è²©å£² - æŠ•è³‡ç”¨
task crawl COMPANY=sumifu TYPE=investment

# æ±æ€¥ãƒªãƒãƒ–ãƒ« - æˆ¸å»ºã¦
task crawl COMPANY=tokyu TYPE=kodate
```

**ãƒ­ã‚°ç›£è¦–ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰:**
```bash
task logs
# Ctrl+C ã§çµ‚äº†
```

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

åˆã‚ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ¬¡ã«å­¦ã¶ã¹ãå†…å®¹ï¼š

### 1. ã‚·ã‚¹ãƒ†ãƒ ã®ç†è§£ã‚’æ·±ã‚ã‚‹
- **[å¤–éƒ¨è¨­è¨ˆæ›¸](docs/basic_design/basic_design_master.md)**: Fire-and-Forgetãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **[å†…éƒ¨è¨­è¨ˆæ›¸](docs/detailed_design/detailed_design_master.md)**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã€Dual Storageãƒ‘ã‚¿ãƒ¼ãƒ³

### 2. é–‹ç™ºã‚’å§‹ã‚ã‚‹
- **[é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰](docs/implementation/developer_guide_master.md)**: ç’°å¢ƒæ§‹ç¯‰ã€ãƒ‡ãƒãƒƒã‚°æ–¹æ³•ã€APIæ§‹é€ 


---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

*   `src/crawler/`: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰
    *   `main.py`: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
    *   `package/`: ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯
    *   `tests/`: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰